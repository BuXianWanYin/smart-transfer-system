# 传输中心功能说明

## 功能概述

传输中心是一个类似百度网盘的统一传输管理页面，集成了文件上传、下载和传输监控功能。

## 主要功能

### 1. 可折叠的拥塞监控面板
- **实时监控指标**
  - 当前算法（CUBIC/BBR/自适应）
  - 拥塞窗口（CWND）大小
  - 实时传输速率
  - RTT（往返时延）
  - 丢包率
  - 带宽估计
  - 网络质量评估

- **交互特性**
  - 支持展开/收起，节省空间
  - 可启动/停止实时监控
  - 每3秒自动刷新数据

### 2. 上传中 Tab
**功能特性：**
- 拖拽上传支持
- 多文件同时上传
- 文件大小检查（默认最大10GB）
- 分片上传支持
- 断点续传
- 秒传功能（文件哈希检测）
- 实时速度显示
- 剩余时间估算
- 单个任务控制（开始/暂停/取消）
- 批量操作（全部开始/全部暂停/清空已完成）

**上传流程：**
1. 选择文件 → 加入队列
2. 计算文件哈希（10%进度）
3. 检查秒传
4. 分片上传（85%进度）
5. 合并文件（5%进度）
6. 完成

### 3. 下载中 Tab
**功能特性：**
- 新建下载任务
- 从文件列表导入
- 实时下载进度
- 速度和剩余时间显示
- 单个任务控制（开始/暂停/取消/打开）
- 批量操作支持
- 自定义保存路径

**下载流程：**
1. 输入文件ID和文件名
2. 开始下载
3. 实时显示进度和速度
4. 下载完成后可直接打开

### 4. 传输完成 Tab
**功能特性：**
- 历史记录管理
- 多条件筛选
  - 传输类型（上传/下载）
  - 时间范围
  - 文件名关键词
- 详细信息查看
  - 文件名、大小、哈希
  - 完成时间、传输时长
  - 平均速度、使用算法
- 批量操作
  - 批量下载
  - 批量删除
- 单个操作
  - 重新下载
  - 查看详情
  - 复制信息
  - 删除记录
- 分页展示

## 文件结构

```
smart-transfer-web/
├── src/
│   ├── views/
│   │   ├── TransferCenter.vue          # 传输中心主页面
│   │   └── transfer/
│   │       ├── UploadPanel.vue         # 上传面板
│   │       ├── DownloadPanel.vue       # 下载面板
│   │       └── CompletedPanel.vue      # 已完成面板
│   ├── store/
│   │   └── fileStore.js                # 文件状态管理（已扩展）
│   └── router/
│       └── index.js                    # 路由配置（已更新）
```

## UI 特点

1. **类似百度网盘的设计**
   - 标签式切换
   - 队列式任务管理
   - 清晰的视觉层次

2. **现代化交互**
   - 平滑过渡动画
   - 悬停效果
   - 拖拽上传支持

3. **状态指示**
   - 不同状态的视觉区分
   - 进度条颜色变化
   - Badge 数量提示

4. **响应式设计**
   - 适配不同屏幕尺寸
   - 移动端友好

## 技术实现

### 状态管理
- 使用 Pinia 管理上传/下载队列
- 实时更新进度和速度
- 历史记录持久化

### 拥塞控制集成
- 集成拥塞监控API
- 实时获取网络指标
- 支持算法切换

### 文件上传优化
- 分片上传（默认2MB）
- 断点续传支持
- 文件哈希校验
- 秒传功能

## 使用方式

### 上传文件
1. 进入"传输中心"
2. 默认显示"上传中"标签
3. 拖拽文件或点击选择文件
4. 文件自动加入队列
5. 点击"开始"按钮开始上传

### 下载文件
1. 切换到"下载中"标签
2. 点击"新建下载任务"
3. 输入文件ID和文件名
4. 可选：自定义保存路径
5. 点击"开始"按钮开始下载

### 查看历史
1. 切换到"传输完成"标签
2. 可按类型、时间、关键词筛选
3. 点击操作按钮进行相应操作
4. 支持批量操作

### 监控网络
1. 展开顶部监控面板
2. 点击"开始监控"按钮
3. 实时查看网络指标
4. 需要时可收起面板节省空间

## 未来优化

- [ ] 支持文件夹上传
- [ ] 支持拖拽排序
- [ ] 添加传输统计图表
- [ ] 支持断点续传的下载
- [ ] 添加传输速度限制
- [ ] 支持离线下载
- [ ] 添加分享功能

## 配置说明

环境变量配置（`.env`）：
```env
# 最大文件大小（字节）
VITE_MAX_FILE_SIZE=10737418240

# 分片大小（字节）
VITE_CHUNK_SIZE=2097152
```

## 路由配置

- `/transfer` - 传输中心（默认首页）
- `/files` - 文件管理
- `/config` - 系统配置

旧路由自动重定向：
- `/upload` → `/transfer`
- `/monitor` → `/transfer`

## 技术支持

如有问题，请查看完整项目文档或联系开发团队。

